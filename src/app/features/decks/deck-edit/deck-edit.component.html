<div class="h-screen p-4 flex flex-col overflow-auto">
  <form nz-form class="mb-4" *ngIf="deck">
    <nz-form-item>
      <nz-form-control>
        <input nz-input placeholder="Nome do Deck" [(ngModel)]="deck.name" name="deckName" class="w-full" />
      </nz-form-control>
    </nz-form-item>
  </form>

  <nz-tabset>
    <nz-tab nzTitle="Buscar Cartas">
      <div class="flex mb-4">
        <input nz-input class="flex-grow" placeholder="Buscar por cartas" [(ngModel)]="searchString" name="searchString" />
        <button nz-button nzType="default" class="ml-2" (click)="search()">Buscar</button>
      </div>
      <div *ngIf="cards.length" class="overflow-auto mb-4" style="max-height: 60vh;">
        <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4">
          <div *ngFor="let card of cards" class="border p-2 rounded-lg shadow hover:shadow-md transition">
            <img [src]="card.images.small" [alt]="card.name" class="mx-auto">
            <div class="text-center mt-2">
              <button nz-button nzType="dashed" (click)="selectCard(card)">Adicionar</button>
            </div>
          </div>
        </div>
      </div>
    </nz-tab>
    <nz-tab nzTitle="Cartas Adicionadas">
      <nz-list nzBordered [nzLoading]="loading" class="overflow-auto" style="max-height: 60vh;">
        <nz-list-item *ngFor="let card of deck?.cards">
          <div class="flex justify-between items-center w-full">
            <div class="flex items-center">
              <img [src]="card.images.small" [alt]="card.name" class="w-20 h-20 object-contain">
              <div class="ml-4">
                <h3>{{ card.name }}</h3>
              </div>
            </div>
            <button nz-button nzType="link" (click)="removeCard(card)">
              <i nz-icon nzType="minus-circle" nzTheme="outline" class="text-red-500"></i>
            </button>
          </div>
        </nz-list-item>
      </nz-list>
    </nz-tab>
  </nz-tabset>

  <button nz-button nzType="primary" class="mt-4" (click)="saveChanges()">Salvar Alterações</button>
</div>
